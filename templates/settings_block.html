
<div class="card border-primary shadow mb-5 rounded">
  <div class="card-header bg-primary text-white">
    <h5 class="mb-0"><i class="fas fa-palette me-2"></i>Appearance Settings</h5>
  </div>
  <div class="card-body">
    <!-- Visual theme selector -->
    <div class="mb-4">
      <h6 class="fw-bold mb-3">Select a Theme</h6>
      
      <div class="row">
        <!-- ANSV Custom Theme -->
        <div class="col-md-4 col-6">
          <div class="theme-preview ansv" onclick="selectTheme('ansv')">
            <div class="theme-header">ANSV</div>
            <div class="theme-body">
              <div>Custom Theme</div>
              <div class="theme-button">Preview</div>
            </div>
          </div>
        </div>
        
        <!-- Dark Theme -->
        <div class="col-md-4 col-6">
          <div class="theme-preview" onclick="selectTheme('darkly')" style="background-color: #222; color: #fff;">
            <div class="theme-header" style="background-color: #375a7f;">Darkly</div>
            <div class="theme-body">
              <div>Dark Theme</div>
              <div class="theme-button" style="background-color: #375a7f;">Preview</div>
            </div>
          </div>
        </div>
        
        <!-- Light Theme -->
        <div class="col-md-4 col-6">
          <div class="theme-preview" onclick="selectTheme('flatly')" style="background-color: #fff; color: #212529;">
            <div class="theme-header" style="background-color: #2C3E50;">Flatly</div>
            <div class="theme-body">
              <div>Light Theme</div>
              <div class="theme-button" style="background-color: #2C3E50;">Preview</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Traditional dropdown selector -->
    <div class="form-group">
      <label for="themeSelect" class="form-label">Advanced Theme Selection:</label>
      <select id="themeSelect" class="form-select" onchange="changeTheme()">
        <option value="ansv" {% if current_theme == 'ansv' %}selected{% endif %}>ANSV Custom</option>
        <option value="cerulean" {% if current_theme == 'cerulean' %}selected{% endif %}>Cerulean</option>
        <option value="cosmo" {% if current_theme == 'cosmo' %}selected{% endif %}>Cosmo</option>
        <option value="cyborg" {% if current_theme == 'cyborg' %}selected{% endif %}>Cyborg</option>
        <option value="darkly" {% if current_theme == 'darkly' %}selected{% endif %}>Darkly</option>
        <option value="flatly" {% if current_theme == 'flatly' %}selected{% endif %}>Flatly</option>
        <option value="journal" {% if current_theme == 'journal' %}selected{% endif %}>Journal</option>
        <option value="litera" {% if current_theme == 'litera' %}selected{% endif %}>Litera</option>
        <option value="lumen" {% if current_theme == 'lumen' %}selected{% endif %}>Lumen</option>
        <option value="lux" {% if current_theme == 'lux' %}selected{% endif %}>Lux</option>
        <option value="materia" {% if current_theme == 'materia' %}selected{% endif %}>Materia</option>
        <option value="minty" {% if current_theme == 'minty' %}selected{% endif %}>Minty</option>
        <option value="morph" {% if current_theme == 'morph' %}selected{% endif %}>Morph</option>
        <option value="pulse" {% if current_theme == 'pulse' %}selected{% endif %}>Pulse</option>
        <option value="quartz" {% if current_theme == 'quartz' %}selected{% endif %}>Quartz</option>
        <option value="sandstone" {% if current_theme == 'sandstone' %}selected{% endif %}>Sandstone</option>
        <option value="simplex" {% if current_theme == 'simplex' %}selected{% endif %}>Simplex</option>
        <option value="sketchy" {% if current_theme == 'sketchy' %}selected{% endif %}>Sketchy</option>
        <option value="slate" {% if current_theme == 'slate' %}selected{% endif %}>Slate</option>
        <option value="solar" {% if current_theme == 'solar' %}selected{% endif %}>Solar</option>
        <option value="spacelab" {% if current_theme == 'spacelab' %}selected{% endif %}>Spacelab</option>
        <option value="superhero" {% if current_theme == 'superhero' %}selected{% endif %}>Superhero</option>
        <option value="united" {% if current_theme == 'united' %}selected{% endif %}>United</option>
        <option value="vapor" {% if current_theme == 'vapor' %}selected{% endif %}>Vapor</option>
        <option value="yeti" {% if current_theme == 'yeti' %}selected{% endif %}>Yeti</option>
        <option value="zephyr" {% if current_theme == 'zephyr' %}selected{% endif %}>Zephyr</option>
      </select>
    </div>
    
    <!-- UI Preferences -->
    <div class="mt-4">
      <h6 class="fw-bold mb-3">UI Preferences</h6>
      
      <div class="form-check form-switch mb-2">
        <input class="form-check-input" type="checkbox" id="enableAnimations" checked>
        <label class="form-check-label" for="enableAnimations">Enable animations</label>
      </div>
      
      <div class="form-check form-switch mb-2">
        <input class="form-check-input" type="checkbox" id="enableToasts" checked>
        <label class="form-check-label" for="enableToasts">Show notifications</label>
      </div>
      
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="compactMode">
        <label class="form-check-label" for="compactMode">Compact mode</label>
      </div>
    </div>
  </div>
</div>

<div id="loadingIndicator" class="modal" tabindex="-1" role="dialog" style="display: none; background: rgba(0, 0, 0, 0.5);">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Switching Themes...</h5>
      </div>
      <div class="modal-body">
        <div class="text-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Function to select theme from visual previews
  function selectTheme(theme) {
    document.getElementById('themeSelect').value = theme;
    changeTheme();
  }
  
  // Update UI preferences from localStorage
  document.addEventListener('DOMContentLoaded', function() {
    // Load saved preferences
    const enableAnimations = localStorage.getItem('enableAnimations') !== 'false';
    const enableToasts = localStorage.getItem('enableToasts') !== 'false';
    const compactMode = localStorage.getItem('compactMode') === 'true';
    
    // Set checkboxes
    document.getElementById('enableAnimations').checked = enableAnimations;
    document.getElementById('enableToasts').checked = enableToasts;
    document.getElementById('compactMode').checked = compactMode;
    
    // Apply preferences to the UI
    document.body.classList.toggle('disable-animations', !enableAnimations);
    document.body.classList.toggle('compact-mode', compactMode);
    
    // Set up change listeners
    document.getElementById('enableAnimations').addEventListener('change', function() {
      localStorage.setItem('enableAnimations', this.checked);
      document.body.classList.toggle('disable-animations', !this.checked);
    });
    
    document.getElementById('enableToasts').addEventListener('change', function() {
      localStorage.setItem('enableToasts', this.checked);
    });
    
    document.getElementById('compactMode').addEventListener('change', function() {
      localStorage.setItem('compactMode', this.checked);
      document.body.classList.toggle('compact-mode', this.checked);
    });
  });
</script>