<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ANSV TTS Module</title>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </head>
  <body>
    <div class="container mt-4">
      <h1 class="mb-4 text-center">ANSV TTS Module</h1>
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link active" id="mainTab" href="#">Main</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="settingsTab" href="#">Settings</a>
        </li>
      </ul>

      <div id="settingsContent" style="display: none" class="shadow-lg p-3 mb-5 rounded" >
        <br /><label> <input type="checkbox" id="autoplay" /> Autoplay </label><br>
        <div class="channel-settings">
          <label for="channelSelect">Select Channel:</label><br>
          <select id="channelSelect" onchange="checkForAddChannelOption(this)">
            <option value="" disabled selected>Select a channel...</option>
            <option value="add_channel">Add Channel</option>
          </select>
          <div id="addChannelDiv" style="display: none">
            <input
              type="text"
              id="newChannelName"
              placeholder="Enter new channel name"
            />
            <button id="addChannelSave" class="btn btn-primary">
              Save New Channel
            </button>
          </div>
        </div>

        <form id="channelConfig" style="display: none" class="mt-3">
          <table class="table table-bordered shadow-sm p-3 mb-5 rounded">
              <tbody>
                  <tr>
                      <td><label for="ttsEnabled">TTS Enabled:</label></td>
                      <td><input type="checkbox" id="ttsEnabled" /></td>
                  </tr>
                  <tr>
                      <td><label for="voiceEnabled">Voice Enabled:</label></td>
                      <td><input type="checkbox" id="voiceEnabled" /></td>
                  </tr>
                  <tr>
                      <td><label for="joinChannel">Join Channel:</label></td>
                      <td><input type="checkbox" id="joinChannel" /></td>
                  </tr>
                  <tr>
                      <td><label for="owner">Owner:</label></td>
                      <td><input type="text" id="owner" /></td>
                  </tr>
                  <tr>
                      <td><label for="trustedUsers">Trusted Users:</label></td>
                      <td><input type="text" id="trustedUsers" /></td>
                  </tr>
                  <tr>
                      <td><label for="ignoredUsers">Ignored Users:</label></td>
                      <td><input type="text" id="ignoredUsers" /></td>
                  </tr>
                  <tr>
                      <td><label for="useGeneralModel">Use General Model:</label></td>
                      <td><input type="checkbox" id="useGeneralModel" /></td>
                  </tr>
                  <tr>
                      <td><label for="linesBetweenMessages">Lines Between Messages:</label></td>
                      <td><input type="number" id="linesBetweenMessages" /></td>
                  </tr>
                  <tr>
                      <td><label for="timeBetweenMessages">Time Between Messages:</label></td>
                      <td><input type="number" id="timeBetweenMessages" /></td>
                  </tr>
              </tbody>
          </table>
      
          <!-- Save Button outside the table -->
          <div class="text-right">
              <button id="saveSettings" class="btn btn-primary">Save</button>
          </div>
      </form>

          <!-- Confirmation Modal -->
          <div class="modal" id="confirmationModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Confirm Save</h5>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>Are you sure you want to save these settings?</p>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-dismiss="modal"
                  >
                    Cancel
                  </button>
                  <button
                    type="button"
                    class="btn btn-primary"
                    id="confirmSave"
                  >
                    Save Changes
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div id="mainContent" class="shadow-lg p-3 mb-5 rounded">
        <div class="table-responsive">
          <table
            class="table table-striped table-bordered table-hover table table-striped shadow-sm p-3 mb-5 rounded"
          >
            <thead class="thead-dark">
              <tr>
                <th>Channel</th>
                <th>Message ID</th>
                <th>Timestamp</th>
                <th>Voice Used</th>
                <th>Text</th>
                <th>Audio Player</th>
              </tr>
            </thead>
            <tbody id="ttsFilesBody">
              <!-- Table rows will be added here by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  </body>
</html>
